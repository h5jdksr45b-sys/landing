<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INTERVALO</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0B0B0C">
<link rel="icon" href="ggg.png">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#0B0B0C;
  color:#F2F2F2;
  text-align:center;
}
h1{
  font-weight:600;
  margin-top:40px;
  letter-spacing:2px;
}
button{
  background:#C62828;
  color:white;
  border:none;
  padding:18px 30px;
  border-radius:14px;
  font-size:18px;
  margin-top:40px;
  cursor:pointer;
}
input, select{
  width:80%;
  padding:12px;
  margin:12px 0;
  border-radius:8px;
  border:1px solid #333;
  background:#1a1a1a;
  color:white;
}
.section{
  display:none;
  margin-top:20px;
}
.card{
  background:#161616;
  padding:20px;
  margin:20px auto;
  width:90%;
  border-radius:12px;
}
.nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:#111;
  padding:12px 0;
}
.nav button{
  background:none;
  color:#F2F2F2;
  border:none;
  font-size:14px;
  margin:0 20px;
}
</style>
</head>

<body>

<h1>INTERVALO</h1>
<p>O segundo entre o impulso e a decisão</p>

<div id="crise" class="section" style="display:block">
  <button onclick="mostrarFormulario()">ESTOU ATIVADO</button>
</div>

<div id="formulario" class="section">
  <div class="card">
    <h3>Intensidade (0-10)</h3>
    <input type="number" id="intensidade" min="0" max="10">

    <h3>Emoção</h3>
    <select id="emocao">
      <option>Medo</option>
      <option>Raiva</option>
      <option>Vergonha</option>
      <option>Tristeza</option>
      <option>Vazio</option>
    </select>

    <h3>Tipo</h3>
    <select id="tipo">
      <option>Medo de abandono</option>
      <option>Frustração</option>
      <option>Ciúme</option>
      <option>Autossabotagem</option>
    </select>

    <button onclick="salvar()">Salvar</button>
  </div>
</div>

<div id="historico" class="section">
  <div class="card">
    <h3>Histórico</h3>
    <div id="lista"></div>
  </div>
</div>

<div class="nav">
  <button onclick="mostrar('crise')">Crise</button>
  <button onclick="mostrar('historico')">Histórico</button>
</div>

<script>
let dados = JSON.parse(localStorage.getItem("intervalo")) || [];

function mostrar(sec){
  document.querySelectorAll(".section").forEach(s=>s.style.display="none");
  document.getElementById(sec).style.display="block";
  atualizar();
}

function mostrarFormulario(){
  mostrar("formulario");
}

function salvar(){
  let intensidade = document.getElementById("intensidade").value;
  let emocao = document.getElementById("emocao").value;
  let tipo = document.getElementById("tipo").value;

  if(intensidade==="") return alert("Preencha intensidade");

  dados.push({
    data:new Date().toLocaleString(),
    intensidade,
    emocao,
    tipo
  });

  localStorage.setItem("intervalo", JSON.stringify(dados));
  mostrar("historico");
}

function atualizar(){
  let lista=document.getElementById("lista");
  lista.innerHTML="";
  dados.forEach(d=>{
    lista.innerHTML+=`
      <div style="margin:10px 0;border-bottom:1px solid #333;padding:6px">
        <b>${d.data}</b><br>
        Intensidade: ${d.intensidade} |
        ${d.emocao} |
        ${d.tipo}
      </div>`;
  });
}

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
